{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/files-service\";\nimport * as i2 from \"@angular/forms\";\nexport class HomeComponent {\n  constructor(filesService) {\n    this.filesService = filesService;\n    this.files = [];\n  }\n  uploadFile(event) {\n    const input = event.target;\n    if (input.files && input.files.length) {\n      this.filesService.uploadFiles(input.files).subscribe(_ => this.loadFiles());\n    }\n  }\n  openFileChooser(fileInput) {\n    fileInput.click();\n  }\n  loadFiles() {\n    this.filesService.getFiles().subscribe(files => {\n      console.log(`files length: ${files.length}`);\n      this.files = files;\n      console.log(this.files.length);\n      // for (let file of this.files) {\n      //   console.log(`${file.filename}: ${file.length}`)\n      // }\n    });\n  }\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.FilesHttpService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 6,\n  vars: 0,\n  consts: [[1, \"form-group\"], [\"type\", \"file\", \"id\", \"file\", \"multiple\", \"\", \"hidden\", \"\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r1 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"form\")(1, \"div\", 0)(2, \"input\", 1, 2);\n      i0.ɵɵlistener(\"change\", function HomeComponent_Template_input_change_2_listener($event) {\n        return ctx.uploadFile($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_4_listener() {\n        i0.ɵɵrestoreView(_r1);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(ctx.openFileChooser(_r0));\n      });\n      i0.ɵɵtext(5, \"Choose files\");\n      i0.ɵɵelementEnd()()();\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;AAQA,OAAM,MAAOA,aAAa;EAIxBC,YAAoBC,YAA8B;IAA9B,iBAAY,GAAZA,YAAY;IAFzB,UAAK,GAAe,EAAE;EAEyB;EAEtDC,UAAU,CAACC,KAAY;IACrB,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAA0B;IAC9C,IAAID,KAAK,CAACE,KAAK,IAAIF,KAAK,CAACE,KAAK,CAACC,MAAM,EAAE;MACrC,IAAI,CAACN,YAAY,CAACO,WAAW,CAACJ,KAAK,CAACE,KAAK,CAAC,CACvCG,SAAS,CAACC,CAAC,IAAI,IAAI,CAACC,SAAS,EAAE,CAAC;;EAEvC;EAEAC,eAAe,CAACC,SAA2B;IACzCA,SAAS,CAACC,KAAK,EAAE;EACnB;EAEAH,SAAS;IACP,IAAI,CAACV,YAAY,CAACc,QAAQ,EAAE,CACzBN,SAAS,CAACH,KAAK,IAAG;MACjBU,OAAO,CAACC,GAAG,CAAC,iBAAiBX,KAAK,CAACC,MAAM,EAAE,CAAC;MAC5C,IAAI,CAACD,KAAK,GAAGA,KAAK;MAClBU,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,KAAK,CAACC,MAAM,CAAC;MAC9B;MACA;MACA;IACF,CAAC,CAAC;EACN;;;AA5BWR,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAmB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCP1BC,4BAAO;MAEmCA;QAAA,OAAUC,sBAAkB;MAAA,EAAC;MAAnED,iBAAuF;MACvFA,iCAAqE;MAArCA;QAAAA;QAAA;QAAA,OAASA,uCAA0B;MAAA,EAAC;MAACA,4BAAY;MAAAA,iBAAS","names":["HomeComponent","constructor","filesService","uploadFile","event","input","target","files","length","uploadFiles","subscribe","_","loadFiles","openFileChooser","fileInput","click","getFiles","console","log","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/kirillbiliashov/Projects/FilesApp/ClientApp/src/app/home/home.component.ts","/Users/kirillbiliashov/Projects/FilesApp/ClientApp/src/app/home/home.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FilesHttpService } from '../services/files-service';\r\nimport { UserFile } from '../models/user-file';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent {\r\n\r\n  public files: UserFile[] = [];\r\n\r\n  constructor(private filesService: FilesHttpService) { }\r\n\r\n  uploadFile(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    if (input.files && input.files.length) {\r\n      this.filesService.uploadFiles(input.files)\r\n        .subscribe(_ => this.loadFiles())\r\n    }\r\n  }\r\n\r\n  openFileChooser(fileInput: HTMLInputElement) {\r\n    fileInput.click();\r\n  }\r\n\r\n  loadFiles() {\r\n    this.filesService.getFiles()\r\n      .subscribe(files => {\r\n        console.log(`files length: ${files.length}`)\r\n        this.files = files;\r\n        console.log(this.files.length)\r\n        // for (let file of this.files) {\r\n        //   console.log(`${file.filename}: ${file.length}`)\r\n        // }\r\n      });\r\n  }\r\n\r\n}\r\n","\r\n<form >\r\n  <div class=\"form-group\">\r\n    <input type=\"file\" id=\"file\" multiple (change)=\"uploadFile($event)\" hidden #fileInput/>\r\n    <button class=\"btn btn-primary\" (click)=\"openFileChooser(fileInput)\">Choose files</button>\r\n  </div>\r\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}